<!DOCTYPE html>
<html lang="en">
<head><%- include('partials/heading.ejs') %></head>
<body>

    <!-- Animated Background -->
    <%- include('partials/animation.ejs') %>

    <!-- Top Navigation -->
    <div class="navbar">
        <a href="http://localhost:8080/"><img src="/images/flat_app.png" class="logo" alt="Flat App Logo"></a>
        <div class="tab">
            <button class="btn tablinks" onclick="openCity(event, 'createAccount')">Create Account</button>
            <button class="btn tablinks" id="defaultOpen" onclick="openCity(event, 'login')">Account Login</button>
        </div>
    </div>

    

    <!-- Main Content -->
    <div id="createAccount" class="tabcontent">
        <div  class="main-content">
            <div class="text-container">
                <form  class='submitFormCreateAccount' action="/create-account" method="POST">
                    <h2>Create Account</h2>
                    <%- include('partials/components/errorMessage.ejs') %>
    
                    <fieldset>
                        <div class="createAccField">
                        <%- include('partials/components/fieldName.ejs') %>
                        <%- include('partials/components/fieldPhone.ejs') %>
                        <%- include('partials/components/fieldEmail.ejs') %>
                        <%- include('partials/components/fieldAddress.ejs') %>
                        </div>
                    </fieldset>
    
                    <fieldset>
                        <div class="password">
                        <%- include('partials/components/fieldPassword.ejs') %>
                        <%- include('partials/components/fieldPasswordCon.ejs') %>
                        </div>
                    </fieldset>
                    
                    <button class="button" type="submit">Create Account</button>
                </form>
            </div>
        </div>
    </div>

    <div id="login" class="tabcontent">
        <div class="main-content">
            <div class="text-container">
                <form class="submitFormCreateAccount" action="/auth" method="POST">
                    <h2>Login</h2>
                    <%- include('partials/components/errorMessage.ejs') %>
                
                    <fieldset>
                        <div class="email">
                        <%- include('partials/components/fieldEmail.ejs') %>
                        </div>
                    </fieldset>
    
                    <fieldset>
                        <div class="password">
                        <%- include('partials/components/fieldPassword.ejs') %>
                        </div>
                    </fieldset>
                
                    <button class="button" type="submit" >Login</button>
                </form>
            </div>
        </div>

    </div>
    
</body>
</html>



  


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<script>
    const submitButton = document.querySelector('button.trial');

    // Add event listener to the trial button
    submitButton.addEventListener('click', () => {
        Swal.fire(
            'User Already Exists!',
            'Please try Again',
            'Unable to Create Account'
        );
    });

    // Uncomment and use this section if you have a create account button
    // const submitCreateAccount = document.querySelector('button.submitCreateAccount');

    // submitCreateAccount.addEventListener('click', () => {
    //     Swal.fire(
    //         'Account Created!',
    //         'Welcome to Flat App',
    //         'success'
    //     );
    // });

    // Uncomment and use this section if you have a successful login event
    // Swal.fire(
    //     'Log in Successful!',
    //     'Welcome to Flat App',
    //     'success'
    // );
</script>

<% if (error ===("User already exists")) { %>
<script>
    Swal.fire(
        'User Already Exists !',
        'Please try Again',
        'Unable to Create Account'
    )
</script>
<%  } %>
<% if (error === ("Incorrect email or password!")) { %>
    <script>
        Swal.fire(
            'Incorrect Login Details!',
            'Please try Again',
            'Unable to Log In'
        )
    </script>
    <%  } %>


<% if (accountCreated) { %>
<script>
    Swal.fire(
    'Account Created!',
    'Log in now to access your account',
    'success'
    )
</script>
<%  } %>